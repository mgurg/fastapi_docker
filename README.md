# fastapi_docker
Dockerized FastAPI

## Performance tests:
```
sudo siege -t10S -c100 0.0.0.0:5000
```


Poetry:
```
poetry config virtualenvs.in-project true
```


## Tables:

Users:
```sql
CREATE TABLE users (
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    uuid uuid,
    client_id int,
    password varchar(256) NOT NULL,
    email varchar(256) UNIQUE,
    phone varchar(16) UNIQUE,    
    first_name varchar(100),
    last_name varchar(100),
    auth_token varchar(128),
    auth_token_valid_to timestamptz,
    is_active boolean NOT NULL,
    service_token varchar(100),
    service_token_valid_to timestamptz,
    tz varchar(64) NOT NULL,
    lang varchar(8) NOT NULL,
    user_role_id int,
    tos boolean,
    deleted_at timestamptz,
    created_at timestamptz,
    updated_at timestamptz
);

```

LoginHistory:
```sql
CREATE TABLE login_history (
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    client_id int,
    login_date timestamptz NOT NULL,
    ip_address varchar(16),
    user_agent varchar(256),
    os varchar(32),
    browser varchar(32),
    browser_lang varchar(32),
    ipinfo json,
    failed boolean NOT NULL,
    failed_login varchar(256),
    failed_passwd varchar(256)
);

```
